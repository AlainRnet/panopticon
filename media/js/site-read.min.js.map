{"version":3,"file":"site-read.min.js","names":["applyExtensionFilters","filterButtons","document","querySelectorAll","filterRows","length","allowedFilters","forEach","el","dataset","extFilter","bsToggle","ariaPressed","includes","push","options","akeeba","System","getOptions","extensionsFilters","window","localStorage","setItem","JSON","stringify","row","shouldShow","filterClass","classList","contains","remove","add","restoreExtensionFilters","activeFilters","json","getItem","parse","e","triggerEvent","rememberCollapsibles","a","collapsible","localStorageKey","collapsed","_typeof","slice","call","elCollapsible","id","addEventListener","idx","indexOf","splice","restoreCollapsibles","getElementById","onDOMContentLoaded","event","b","c","profileId","value","url","enqueue","location","tooltipTriggerList","tooltipList","_toConsumableArray","map","tooltipTriggerEl","bootstrap","Tooltip","readyState"],"sources":["site-read.js"],"sourcesContent":["/*!*\n * @package   panopticon\n * @copyright Copyright (c)2023-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   https://www.gnu.org/licenses/agpl-3.0.txt GNU Affero General Public License, version 3 or later\n */\n\n(() =>\n{\n    /**\n     * Apply the extensions filters\n     */\n    const applyExtensionFilters = () =>\n    {\n        const filterButtons = document.querySelectorAll(\".extensionFilter\");\n        const filterRows    = document.querySelectorAll(\"tr.extension-row\");\n\n        if (!filterButtons || filterButtons.length < 1 || !filterRows || filterRows.length < 1)\n        {\n            return;\n        }\n\n        let allowedFilters = [];\n\n        filterButtons.forEach((el) =>\n        {\n            if (!el.dataset.extFilter || !el.dataset.bsToggle || el.dataset.bsToggle !== \"button\" || el.ariaPressed !== \"true\")\n            {\n                return;\n            }\n\n            if (allowedFilters.includes(el.dataset.extFilter))\n            {\n                return;\n            }\n\n            allowedFilters.push(el.dataset.extFilter);\n        });\n\n        const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n        if (options.extensionsFilters)\n        {\n            window.localStorage.setItem(options.extensionsFilters, JSON.stringify(allowedFilters));\n        }\n\n        filterRows.forEach((row) =>\n        {\n            let shouldShow = true;\n\n            if (allowedFilters.length >= 1)\n            {\n                allowedFilters.forEach((filterClass) =>\n                {\n                    shouldShow = shouldShow && row.classList.contains(filterClass);\n                });\n            }\n\n            if (row.classList.contains(\"d-none\") && shouldShow)\n            {\n                row.classList.remove(\"d-none\");\n\n                return;\n            }\n\n            if (!row.classList.contains(\"d-none\") && !shouldShow)\n            {\n                row.classList.add(\"d-none\");\n            }\n        });\n    }\n\n    /**\n     * Restore the extensions filters state from the browser's local storage\n     */\n    const restoreExtensionFilters = () =>\n    {\n        const filterButtons = document.querySelectorAll(\".extensionFilter\");\n\n        if (!filterButtons || filterButtons.length < 1)\n        {\n            return;\n        }\n\n        let activeFilters = [];\n\n        try\n        {\n            const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n            const json    = window.localStorage.getItem(options.extensionsFilters);\n\n            activeFilters = JSON.parse(json);\n        }\n        catch (e)\n        {\n            return;\n        }\n\n        if (!activeFilters)\n        {\n            return;\n        }\n\n        filterButtons.forEach((el) =>\n        {\n            if (!el.dataset.extFilter || !el.dataset.bsToggle || el.dataset.bsToggle !== \"button\")\n            {\n                return;\n            }\n\n            if (activeFilters.includes(el.dataset.extFilter))\n            {\n                akeeba.System.triggerEvent(el, \"click\");\n            }\n        });\n\n    };\n\n    const rememberCollapsibles = () =>\n    {\n        const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n\n        if (!options.collapsible)\n        {\n            return;\n        }\n\n        const localStorageKey = options.collapsible;\n        const json            = window.localStorage.getItem(localStorageKey) ?? \"\";\n        let collapsed         = [];\n\n        try\n        {\n            collapsed = JSON.parse(json);\n        }\n        catch (e)\n        {\n            collapsed = [];\n        }\n\n        if (typeof collapsed !== \"object\")\n        {\n            collapsed = [];\n        }\n\n        [].slice.call(document.querySelectorAll(\".collapse\")).forEach((elCollapsible) =>\n        {\n            const id = elCollapsible.id;\n\n            elCollapsible.addEventListener(\"hide.bs.collapse\", () =>\n            {\n                if (collapsed.includes(id))\n                {\n                    return;\n                }\n\n                collapsed.push(id);\n\n                window.localStorage.setItem(localStorageKey, JSON.stringify(collapsed));\n            });\n\n            elCollapsible.addEventListener(\"show.bs.collapse\", () =>\n            {\n                const idx = collapsed.indexOf(id);\n\n                if (idx < 0)\n                {\n                    return;\n                }\n\n                collapsed.splice(idx, 1);\n\n                window.localStorage.setItem(localStorageKey, JSON.stringify(collapsed));\n            })\n        });\n    };\n\n    const restoreCollapsibles = () => {\n        const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n\n        if (!options.collapsible)\n        {\n            return;\n        }\n\n        const localStorageKey = options.collapsible;\n        const json            = window.localStorage.getItem(localStorageKey) ?? \"\";\n        let collapsed         = [];\n\n        try\n        {\n            collapsed = JSON.parse(json);\n        }\n        catch (e)\n        {\n            collapsed = [];\n        }\n\n        if (typeof collapsed !== \"object\")\n        {\n            collapsed = [];\n        }\n\n        [].slice.call(collapsed).forEach((id) => {\n            const elCollapsible = document.getElementById(id);\n\n            if (!elCollapsible) {\n                return;\n            }\n\n            elCollapsible.classList.remove('show');\n        });\n    };\n\n    /**\n     * Runs when the DOM is ready (page has loaded)\n     */\n    const onDOMContentLoaded = () =>\n    {\n        // Akeeba Backup buttons\n        document.getElementById(\"akeebaBackupTakeButton\")?.addEventListener(\"click\", (event) =>\n        {\n            const profileId = document.getElementById(\"akeebaBackupTakeProfile\")?.value;\n            const url       = akeeba.System.getOptions(\"akeebabackup\")?.enqueue + \"&profile_id=\" + profileId;\n\n            if (!profileId)\n            {\n                return;\n            }\n\n            window.location = url;\n        });\n\n        // Extension filter tooltips\n        const tooltipTriggerList = document.querySelectorAll(\"[data-toggle-tooltip=\\\"tooltip\\\"]\")\n        const tooltipList        = [...tooltipTriggerList].map(\n            tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));\n\n        // Extension filters\n        restoreExtensionFilters();\n\n        [].slice.call(document.querySelectorAll(\".extensionFilter\")).forEach((el) =>\n        {\n            el.addEventListener(\"click\", applyExtensionFilters)\n        })\n\n        applyExtensionFilters();\n\n        // Remember collapsible status\n        restoreCollapsibles();\n        rememberCollapsibles();\n    };\n\n    // Workaround for this file loading before the DOM has been loaded on fast servers.\n    if (document.readyState === \"loading\")\n    {\n        document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n    }\n    else\n    {\n        onDOMContentLoaded();\n    }\n})();\n"],"mappings":"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"}