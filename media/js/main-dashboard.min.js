"use strict";var _petiteVueMin=require("../petite-vue/petite-vue.min.js");function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function SitesList(a){var b,c,d,e,f,g,h=akeeba.System.getOptions("panopticon.dashboard");return{$template:"#sitesListTemplate",sites:[],MAX_TIMER:null!==(b=null===a||void 0===a?void 0:a.maxTimer)&&void 0!==b?b:null!==(c=null===h||void 0===h?void 0:h.maxTimer)&&void 0!==c?c:90,MAX_PAGES:null!==(d=null===a||void 0===a?void 0:a.maxPages)&&void 0!==d?d:null!==(e=null===h||void 0===h?void 0:h.maxPages)&&void 0!==e?e:50,PAGE_LENGTH:null!==(f=null===a||void 0===a?void 0:a.pageLimit)&&void 0!==f?f:null!==(g=null===h||void 0===h?void 0:h.pageLimit)&&void 0!==g?g:20,restartTimer:!1,availableTime:0,countdownTimer:null,error:null,feedMeData:function feedMeData(a){var b=this;0===a&&(this.sites=[]);a>=this.MAX_PAGES||(axios.get("".concat(h.url,"&limitstart=").concat(this.PAGE_LENGTH*a,"&limit=").concat(this.PAGE_LENGTH)).then(function(c){return b.error=null,"object"===_typeof(c.data)&&0!==c.data.length&&void(b.sites=b.sites.concat(c.data),b.feedMeData(++a))}).catch(function(a){b.stopTimer(),b.error=a}),!this.countdownTimer&&this.restartTimer&&(this.restartTimer=!1,this.resetTimer(),this.toggleTimer()))},resetTimer:function resetTimer(){this.availableTime=this.MAX_TIMER},toggleTimer:function toggleTimer(){return this.countdownTimer?(window.clearInterval(this.countdownTimer),this.availableTime=this.MAX_TIMER,void(this.countdownTimer=null)):void(this.countdownTimer=window.setInterval(this.timerTick,1e3))},stopTimer:function stopTimer(){this.countdownTimer&&this.toggleTimer()},timerTick:function timerTick(){this.availableTime-=1,0===this.availableTime&&(this.toggleTimer(),this.restartTimer=!0,this.feedMeData(0))},mounted:function mounted(){this.availableTime=this.MAX_TIMER,this.toggleTimer(),this.feedMeData(0)},reloadData:function reloadData(){this.restartTimer=null!==this.countdownTimer,this.restartTimer&&this.toggleTimer(),this.feedMeData(0)}}}(0,_petiteVueMin.createApp)({SitesList:SitesList}).mount();

//# sourceMappingURL=main-dashboard.min.js.map