{"version":3,"file":"main.min.js","names":["heartBeatCheck","options","akeeba","System","getOptions","Ajax","ajax","url","type","cache","success","responseText","response","JSON","parse","e","targetId","warningId","elTarget","document","getElementById","classList","remove","add","window","addEventListener","setInterval","tooltipTriggerList","querySelectorAll","tooltipList","_toConsumableArray","map","tooltipTriggerEl","bootstrap","Tooltip"],"sources":["main.js"],"sourcesContent":["/*\n * @package   panopticon\n * @copyright Copyright (c)2023-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n(() =>\n{\n    const heartBeatCheck = function ()\n    {\n        const options = akeeba.System.getOptions(\"panopticon.heartbeat\")\n        akeeba.Ajax.ajax(\n            options.url,\n            {\n                type:    \"GET\",\n                cache:   false,\n                success: (responseText, statusText, xhr) =>\n                         {\n                             let response = null;\n\n                             try\n                             {\n                                 response = JSON.parse(responseText);\n                             }\n                             catch (e)\n                             {\n                                 // Maybe the session expired?\n                                 return;\n                             }\n\n                             const targetId = options.warningId;\n\n                             if (!targetId) {\n                                 return;\n                             }\n\n                             const elTarget = document.getElementById(targetId);\n\n                             if (!elTarget) {\n                                 return;\n                             }\n\n                             elTarget.classList.remove('d-none', 'd-block');\n                             elTarget.classList.add(response ? 'd-none' : 'd-block');\n                         }\n            }\n        );\n    }\n\n    window.addEventListener('DOMContentLoaded', () => {\n        // Set up the CRON heartbeat check\n        window.setInterval(heartBeatCheck, 30000);\n\n        heartBeatCheck();\n\n        // Enable BS tooltips\n        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\n        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))\n    })\n})()\n"],"mappings":"+9BAMA,CAAC,UACD,CACI,GAAM,CAAAA,CAAc,CAAG,QAAAA,CAAA,CACvB,CACI,GAAM,CAAAC,CAAO,CAAGC,MAAM,CAACC,MAAM,CAACC,UAAU,CAAC,sBAAsB,CAAC,CAChEF,MAAM,CAACG,IAAI,CAACC,IAAI,CACZL,CAAO,CAACM,GAAG,CACX,CACIC,IAAI,CAAK,KAAK,CACdC,KAAK,GAAS,CACdC,OAAO,CAAE,SAAAA,QAACC,CAAY,CACb,CACI,GAAI,CAAAC,CAAQ,CAAG,IAAI,CAEnB,GACA,CACIA,CAAQ,CAAGC,IAAI,CAACC,KAAK,CAACH,CAAY,CACtC,CACA,MAAOI,CAAC,CACR,CAEI,MACJ,CAEA,GAAM,CAAAC,CAAQ,CAAGf,CAAO,CAACgB,SAAS,CAElC,GAAKD,CAAQ,EAIb,GAAM,CAAAE,CAAQ,CAAGC,QAAQ,CAACC,cAAc,CAACJ,CAAQ,CAAC,CAE7CE,CAAQ,GAIbA,CAAQ,CAACG,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAE,SAAS,CAAC,CAC9CJ,CAAQ,CAACG,SAAS,CAACE,GAAG,CAACX,CAAQ,CAAG,QAAQ,CAAG,SAAS,CAAC,EAC3D,CACb,CACJ,CACJ,CAAC,CAEDY,MAAM,CAACC,gBAAgB,CAAC,kBAAkB,CAAE,UAAM,CAE9CD,MAAM,CAACE,WAAW,CAAC1B,CAAc,CAAE,GAAK,CAAC,CAEzCA,CAAc,CAAC,CAAC,IAGV,CAAA2B,CAAkB,CAAGR,QAAQ,CAACS,gBAAgB,CAAC,8BAA4B,CAAC,CAC5EC,CAAW,CAAGC,kBAAA,CAAIH,CAAkB,EAAEI,GAAG,CAAC,SAAAC,CAAgB,QAAI,IAAI,CAAAC,SAAS,CAACC,OAAO,CAACF,CAAgB,CAAC,EAC/G,CAAC,CACL,CAAC,EAAE,CAAC"}